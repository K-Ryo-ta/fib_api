# fib_api
## ディレクトリの説明
- Q2
  - 技術課題の問題2に関する回答がテキスト形式で保管されています。
- front
  - 今回の技術課題の問題1で期間があったので、front側も実装してみました。
- back
  - 技術課題の問題1に関するソースコード一式です。
## 実際に動いている環境のリンク
- front
  - https://fib-api-seven.vercel.app/
- back
  - https://fib-api-1a2x.onrender.com/fib
## リクエストの形式
`https://fib-api-1a2x.onrender.com/fib/:fibnumber`というAPIの実装をしているので、例えば第20項を調べたいとなったときは、`https://fib-api-1a2x.onrender.com/fib/20`という形になってしまいました。
## デプロイツール
- front
  - vercel
- back
  - Render
  バックエンドに関しては、GCPのCloud runでデプロイをしてみたく、Dockerを用いながら頑張って挑戦していたのですが、苦戦しているため、Renderでのデプロイをしています。

## 今回難しかったところ・意識したところ
- ユニットテストを全くしたことがなかったため、どうやって書くかを調べながら取り組みました。
  - AAAというArrange,Act,Assertを意識しながらやってみました。
  - ユニットテストを実行する上でフローチャートを書きながら行うと良いらしいので、フローチャートを書いて取り組んでみました。
- バックエンドの技術選定
  - 今回はテストフレームワークにjestを採用しました。テストは主にテストランナー(mocha, jest)、アサーションツール(chai, jest)、カバレッジツール(istanbul, jest)、テストダブルツール(sinon, jest)、ダミーデータツールの5種類に分かれているらしく、これらが全てあるjestを使ってみました。
  - prismaを使うかどうか迷いました。ORMはバックエンドのデプロイをした際に、自分の中での勝手なイメージでは、データベースとバックエンドのExpressやその他の言語・フレームワークをつなぐものというイメージでした。そのため、今回の課題では、データベースを使わないのでORMは使わないことにしました。
  - 自分の経験として、prismaを少し使ったことがあり、その中でExpressとFastAPIを少し触った経験があったため、この二つで悩みましたが、FastAPIを使った時に参考となる記事が少なく、実装が難しかった経験からExpressを採用しました。
## 実装で大変だったところ
- フィボナッチの実装
  - フィボナッチの実装をしている際に、99などの大きな値のとき計算量が大きくなりすぎて、処理時間が長すぎる問題がありました。最初はbigint型をすればできるかなと思っていたのですが、bigint型にしても結果の数値に少しズレがあったり、処理時間が長すぎるままであったりしました。今回自分が行った解決策としては、再帰関数を用いていたため、メモ化という一旦計算結果を保存しておく手法を調べて使ってみたのですが、for文で実装するとそんなことしなくてもできるという記事を見つけてしまい、そっちの方が良かったのではと実装した後に思っています。
- エラー処理
    - 今回はテストを書いたときに、入力値のエラーをフィボナッチ数列を計算するところでエラー処理の実装をしてしまったため、APIを叩く段階で入力値に対するエラー処理は書いた方が良かったのではないかなと少し思ったりしています。
